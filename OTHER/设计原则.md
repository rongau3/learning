## 设计原则

------

### 开闭原则

定义：一个软件实体如类、模块和函数应该对扩展开放，对修改关闭

扩展：用抽象构建框架，用实现扩展细节

优点：提高软件的可复用性及可维护性

编写代码：尽量使用面向接口编程，接口的方法也应该是稳定的，当要进行扩展时应该使用**继承或实现**进行对目标类的扩展；使用该类实例化时尽量使用接口类或抽象类(强转即可获得抽象类或接口没有的方法)减少以后扩展进行的代码修改量

------

### 依赖倒置原则

定义：高层模块不应该依赖底层模块，二者都应该依赖其抽象

扩展：抽象不应该依赖细节；细节应该依赖抽象；针对接口编程，不要针对实现编程

优点：可以使各个类或模块彼此独立互不影响，实现模块间的松耦合，降低模块间的耦合性；提高系统稳定性，提高代码可读性和可维护性，降低修改程序所造成的风险

编写代码：尽量通过接口或抽象类实现实现类，使用具体类时尽量通过接口或抽象类进行定义，对实现类使用可通过使用接口后注入实现类进行解耦，例如：通过添加属性(实现类的接口或抽象类)，通过构造方法或者setter方法进行注入，从而在类里面使用，实现实现类和该类解耦仅依赖或关联接口或抽象类。

```java
public class UserController{
    //IUserService为接口，使用该属性时应注入实现该接口的实体类
    private IUserService userService;
    
    /**
    //比较适用于仅一次注入实体类
    public UserController(IUserService userService){
        this.userService=userService;
    }
    */
    
    //适用于多次注入实体类
    public void setUserService(IUserService userService){
        this.userService=userService;
    }
    
    public ServerResponse login(User user){
        return userService.checkLogin(user);
    }
} 
```

------

### 单一职责原则

定义：不要存在多于一个导致类变更的原因

扩展：一个类/接口/方法只负责一项职责

优点：降低类的复杂度、提高类的可读性，提高系统的可维护性、降低变更引起的风险

编写代码：

- 接口的单一职责：将一个接口的不同职责拆分，当一个接口需要修改，不会影响到其他承担其他职责的接口
- 方法的单一职责：当需要根据情况实现两种以上的功能时，应该将方法进行拆分
- 类的单一职责：同接空和方法一样，但类的单一职责遵循应看实际情况，它受许多因素影响，类的单一职责遵循也很容易导致类的爆炸。

-----

### 接口隔离原则

定义：用多个专门的接口，而不使用单一的总接口，客户端不应该依赖它不需要的接口

注意：

- 一个类对一个类的依赖应该建立在最小的接口上
- 建立单一接口，不要建立庞大臃肿的接口
- 尽量细化接口，接口中的方法尽量少
- **注意适度原则，一定要适度**，否则接口过多会提高程序的复杂性

优点：符合高内聚低耦合的设计思想，从而使得类具有很好的可读性、可扩展性和可维护性

编写代码：编写一个接口经常会出现一些实现类中不会使用的方法，需要对接口进行适度的细化，对接口进行隔离，因为细粒度可以组装但粗粒度不可细分，尽量用少的方法实现更多的功能。

------

### 迪米特原则

定义：一个对象应该对其他对象保持最少的的了解。又叫最少知道原则

核心观念：尽量降低类与类之间的耦合

优点：降低类之间的耦合

注意：不要过分使用迪米特原则否则会产生过多的中介类，导致系统变复杂，导致维护变得困难

强调：迪米特原则强调只和朋友交流，不和陌生人讲话（朋友：出现在成员变量、方法的输入、输出参数中的类称为成员朋友类，而出现在方法体内部的类不属于朋友类）

编写代码：类的public方法尽量少和非静态的public变量，尽量多使用private、protect和包权限；若方法内存在非朋友类，尽量将其移除；

------

