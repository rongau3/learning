## 基本操作

### 设置签名

- 形式：
  - 用户名：xxxx
  - Email地址：xxxxxx@xxxx.com
- 作用：区分不同开发人员的身份
- 与远程库(代码托管中心)的账号和密码无关
- 命令：git config
  - 优先级大小：项目/仓库级别>系统用户级别
    - 注：不允许无签名，若无项目级别的签名则用系统级别的签名
  - 项目/仓库级别：仅在本地库的范围内生效
    - 在工作区内设置的签名
    - 设置用户名：git config user.name [用户名]
    - 设置邮箱地址：git config user.email [邮箱地址]
    - 签名存放在.git/config上
  - 系统用户级别：登陆当前操作系统的用户范围
    - 设置用户名：git config --global user.name [用户名]
    - 设置邮箱地址：git config --global user.email [邮箱地址]
    - 签名存放在C:/Users/[用户]/.gitconfig上

### Git仓库的创建

- 指令：git init
  - 使用后会创建一个.git的隐藏文件
    - 存放的是本地库相关的子目录和文件，不建议删除和修改

### 添加提交/删除和查询状态操作

- 工作目录下的每一个文件有两种状态：**已跟踪或未跟踪**
  - **已跟踪的文件**是指那些被**纳入了版本控制的文件**，在**上一次快照中有它们的记录**，在工作一段时间后，它们的状态可能处于未修改，已修改或已放入暂存区。 工作目录中除已跟踪文件以外的所有其它文件都属于**未跟踪文件**，它们**既不存在于上次快照的记录中，也没有放入暂存区**。 
  - 初次克隆某个仓库的时候，工作目录中的所有文件都属于已跟踪文件，并处于未修改状态。
- 查看状态(工作区、暂存区状态)：git status
- 跟踪文件(将新建/修改的文件添加在暂存区内/工作区删除的文件也可通过该指令提交)：git add <file>
  - 新建文件必须通过git add 跟踪并添加到暂存区
  - 非新建文件课直接通过git commit提交到本地库
- 撤销刚才跟踪的文件(从暂存区内移除文件)：git rm --cached <file>
- 提交(从暂存区提交到本地库)：
  - git commit <file>
    - 跳转输入提交信息的界面
  - git commit -m "[提交信息]" <file>

- 删除文件：git rm <file>
  - 将工作区删除的文件信息进行提交，也可用**git add**进行提交
  - 找回删除文件进行**版本操作**进行找回
  - 找回已删除的文件的操作前提：**文件是否存在本地库**

## 版本操作

- 查看版本记录：
  - git log
    - 参数：-- pretty=online	以每个版本显示一行形式展示
    - 参数：--online 与-- pretty=online差不多，仅仅是哈希值与之不同(仅截取一部分)
    - 仅从当前版本开始
  - git reflog
    - HEAD@{移动到当前版本所需要的步数}
    - 可以查看所有版本
  - HEAD -> master HEAD指针指向当前版本

- 前进后退版本：git reset

  - git reset --hard HEAD	跳转至当前版本(根据本地库当前版本刷新暂存区和工作区)
    - 可用于提交删除至暂存区找回删除的操作
  - 基于索引值(能跳转任意版本，配合git reflog使用)：
    - git reset --hard [索引值/索引值的一部分]

  - 基于^(仅能后退)：
    - git reset --hard HEAD[n个^]	多少个^后退多少个版本

  - 基于~(仅能后退)：
    - git reset --hard HEAD~[n]	n代表后退几个版本，3即代表后退3个版本

  - 参数：--hard、--mixed、--soft区别
    - --hard：在本地库移动HEAD指针并**重置暂存区和工作区**
    - --mixed：在本地库移动HEAD指针并**重置暂存区**
    - --soft：在本地库移动HEAD指针

### 比较文件差异

- git diff [参数] <file>
  - 默认参数无：和暂存区进行比较
  - 默认文件名无：所有文件进行比较
  - 参数：HEAD
    - 和当前版本进行比较
  - 参数：HEAD[n个^]
    - 和上n个版本进行比较

## 分支

### 分支操作

- 查看分支：git branch -v

- 创建分支：git branch [分支名]

- 切换分支：git checkout [分支名]

- 合并分支：

  1. 切换到被接收合并的分支上：git checkout [分支名]
  2. 执行：git merge [分支名]

- 合并冲突/解决冲突：

  1. 进入冲突的文件

     - ```
       <<<<<<< HEAD
       [当前合并分支产生冲突的内容：属于当前的分支]
       =======
       [当前合并分支产生冲突的内容：属于合并进来的分支]
       >>>>>>> [分支名]
       ```

  2. 修改并删除冲突产生的字符

  3. 保存退出

  4. 执行：git add操作提交至暂存区

  5. 执行：git commit操作(**不能带文件名但可以带提交信息**)提交至本地库

## 远程库

### 远程库操作

- 创建库

  1. 创建本地仓库：git init
  2. 创建远程仓库(github/码云)，并获取地址
  3. 创建别名
     - 查看别名：git remote -v
     - 给真实地址起别名：git remote add [别名] [真实地址]

- 推送操作

  - 推送：git push [别名/真实地址] [分支]
    - 需要登陆

- 克隆操作

  - git clone [真实地址/别名]
    - 完整把远程库下载至本地
    - 创建了origin远程库别名
    - 初始化本地库

- 拉取操作

  - 直接拉取：git pull [别名/真实地址] [分支]
  - 分步拉取：pull=fetch+merge
    - 将远程库下载至**本地**：git fetch [别名/真实地址] [分支]
      - 仅仅是下载至本地，且不需要登陆
      - 切换下载的内容：git checkout [别名/真实地址] [分支]
      - 切换回本地库：git checkout [分支]
    - 合并至**本地库**：git merge [别名/真实地址]/[分支]

- 协同开发冲突解决

  - 产生情况：无法推送
  - 拉取远程库：git pull [别名/真实地址] [分支]
  - 执行分支操作的合并冲突/解决冲突
  - 执行：git pull [别名/真实地址] [分支]

- SSH免密登陆

  - 局限：仅供一个账号使用

  1. 进入用户的家目录：cd ~
     - 删除账户密码：rm -r .ssh/
  2. ssh生成账号密码：ssh-keygen -t rsa -C [账号]
  3. 进入./ssh文件夹：cd ./ssh
  4. 获取id_rsa.pub的文件内容，并复制
  5. 进入github/码云设置SSH keys